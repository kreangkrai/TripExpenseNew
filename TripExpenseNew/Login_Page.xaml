<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    x:Class="TripExpenseNew.Login_Page"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:shell="http://schemas.microsoft.com/dotnet/2021/maui"
    Title="Login_Page"
    shell:Shell.NavBarIsVisible="False">

    <!--  ใช้ Grid เพื่อซ้อน Loading Overlay ด้านบนสุด  -->
    <Grid>
        <!--  === เนื้อหาหลัก ===  -->
        <ScrollView>
            <Grid
                Padding="5,5"
                ColumnDefinitions=".10*,.80*,.10*"
                RowDefinitions="*,50,50,60,60,Auto"
                RowSpacing="20"
                VerticalOptions="Center">

                <!--  LOGO  -->
                <Image
                    Grid.Row="0"
                    Grid.Column="1"
                    Aspect="AspectFit"
                    HeightRequest="250"
                    HorizontalOptions="Center"
                    Source="logo_tripexpense.png" />

                <!--  USERNAME  -->
                <Border
                    Grid.Row="1"
                    Grid.Column="1"
                    Stroke="#778899"
                    StrokeShape="RoundRectangle 5"
                    StrokeThickness="2">
                    <Entry
                        x:Name="txt_name"
                        ClearButtonVisibility="WhileEditing"
                        FontSize="18"
                        Keyboard="Text"
                        Placeholder="Username" />
                </Border>

                <!--  PASSWORD  -->
                <Border
                    Grid.Row="2"
                    Grid.Column="1"
                    Stroke="#778899"
                    StrokeShape="RoundRectangle 5"
                    StrokeThickness="2">
                    <Entry
                        x:Name="txt_password"
                        FontSize="18"
                        IsPassword="true"
                        MaxLength="20"
                        Placeholder="Password" />
                </Border>

                <!--  LOG IN BUTTON  -->
                <Button
                    x:Name="LogInBtn"
                    Grid.Row="3"
                    Grid.Column="1"
                    BackgroundColor="#14AE5C"
                    Clicked="LogInBtn_Clicked"
                    CornerRadius="30"
                    FontAttributes="Bold"
                    FontSize="Large"
                    HeightRequest="60"
                    HorizontalOptions="Fill"
                    Text="LOG IN" />

                <!--  SERVER BUTTON  -->
                <Button
                    x:Name="ServerBtn"
                    Grid.Row="4"
                    Grid.Column="1"
                    BackgroundColor="#C3C3D4"
                    Clicked="ServerBtn_Clicked"
                    CornerRadius="30"
                    FontAttributes="Bold"
                    FontSize="Large"
                    HeightRequest="60"
                    HorizontalOptions="Fill"
                    Text="SERVER" />

                <!--  BOTTOM SHEET (เริ่มจากล่างจอ)  -->
                <ContentView
                    x:Name="BottomSheet"
                    Grid.Row="5"
                    Grid.RowSpan="3"
                    Grid.ColumnSpan="3"
                    Padding="10"
                    BackgroundColor="White"
                    IsVisible="False"
                    TranslationY="600">
                    <ContentView.GestureRecognizers>
                        <PanGestureRecognizer PanUpdated="OnPanUpdated" />
                    </ContentView.GestureRecognizers>

                    <VerticalStackLayout Padding="20" Spacing="15">
                        <BoxView
                            HeightRequest="4"
                            HorizontalOptions="Center"
                            WidthRequest="70"
                            Color="Gray" />

                        <Label
                            FontAttributes="Bold"
                            FontFamily="Rajdhani-Bold.ttf"
                            FontSize="28"
                            Text="SERVER NAME"
                            TextColor="#1C4698" />

                        <Border
                            Stroke="#778899"
                            StrokeShape="RoundRectangle 5"
                            StrokeThickness="2">
                            <Entry
                                x:Name="txt_server"
                                FontSize="18"
                                MaxLength="100"
                                Placeholder="https://your-server.com" />
                        </Border>

                        <Button
                            x:Name="ConnectBtn"
                            BackgroundColor="#14AE5C"
                            Clicked="ConnectBtn_Clicked"
                            CornerRadius="25"
                            FontAttributes="Bold"
                            FontSize="Medium"
                            HeightRequest="50"
                            HorizontalOptions="Fill"
                            Text="CONNECT" />
                    </VerticalStackLayout>
                </ContentView>
            </Grid>
        </ScrollView>

        <!--  === LOADING OVERLAY (ด้านบนสุด) ===  -->
        <Grid
            x:Name="LoadingOverlay"
            BackgroundColor="#CC000000"
            IsVisible="False"
            ZIndex="999">
            <VerticalStackLayout
                HorizontalOptions="Center"
                Spacing="20"
                VerticalOptions="Center">
                <ActivityIndicator
                    HeightRequest="60"
                    IsRunning="True"
                    WidthRequest="60"
                    Color="White" />
                <Label
                    FontAttributes="Bold"
                    FontSize="18"
                    Text="Connecting..."
                    TextColor="White" />
            </VerticalStackLayout>
        </Grid>
    </Grid>
</ContentPage>